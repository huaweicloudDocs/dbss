# 数据库安全审计运行正常但无审计记录<a name="ZH-CN_TOPIC_0175915859"></a>

## 故障现象<a name="section4597163713358"></a>

数据库安全审计实例功能正常，当触发数据库流量后，在SQL语句列表页面搜索执行的语句，不能搜索到相关的审计信息。

## 可能原因<a name="section12392122314367"></a>

数据库已开启SSL。

>![](public_sys-resources/icon-note.gif) **说明：**   
>数据库开启SSL时，将不能使用数据库安全审计功能。  

## 处理步骤<a name="section20158847143620"></a>

以MySQL数据库自带的客户端为例说明，操作步骤如下：

1.  使用MySQL数据库自带的客户端，以**root**用户登录MySQL数据库。
2.  执行以下命令，查看MySQL数据库连接的方式。

    **\\s**

    -   如果界面回显类似以下信息，说明MySQL数据库已关闭SSL，请执行[4](#li2733444154714)。

        ```
        SSL:                    Not in use 
        ```

    -   如果界面回显类似以下信息，说明MySQL数据库已开启SSL，请执行[3](#li135454178327)。

        ```
        SSL:                    Cipher in use is XXX-XXX-XXXXXX-XXX 
        ```

3.  <a name="li135454178327"></a>以SSL模式登录MySQL数据库。
    1.  执行以下命令，退出MySQL数据库。

        **exit**

    2.  <a name="li161711332142914"></a>以**root**用户重新登录MySQL数据库。

        在登录命令后添加以下参数：

        **--ssl-mode=DISABLED**

        或

        **--ssl=0**

        >![](public_sys-resources/icon-notice.gif) **须知：**   
        >以SSL模式登录MySQL数据库，只能关闭本次SSL。当需要使用数据库安全审计功能时，请以[3.b](#li161711332142914)方式登录MySQL数据库。  

    3.  执行以下命令，查看MySQL数据库连接的方式。

        **\\s**

        如果界面回显类似以下信息，说明MySQL数据库已关闭SSL。请执行[4](#li2733444154714)。

        ```
        SSL:                    Not in use 
        ```

4.  <a name="li2733444154714"></a>输入一条SQL语句后，在SQL语句列表页面搜索执行的语句。

    搜索SQL语句的详细操作，请参见[查看SQL语句详细信息](查看SQL语句详细信息.md)。

    -   如果可以搜索到输入的SQL语句信息，说明问题已解决。
    -   如果不能搜索到输入的SQL语句信息，说明问题仍存在，请联系技术支持。


